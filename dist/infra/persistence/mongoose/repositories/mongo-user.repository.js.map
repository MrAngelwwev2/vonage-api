{"version":3,"sources":["../../../../../src/infra/persistence/mongoose/repositories/mongo-user.repository.ts"],"sourcesContent":["\nimport { UserRepository } from \"@app/application/contact-center/ports/user.repository\";\nimport { User } from \"@app/domain/contact-center/user\";\nimport { Injectable } from \"@nestjs/common\";\nimport { InjectModel } from \"@nestjs/mongoose\";\nimport  { Model } from \"mongoose\";\nimport { User as UserMongoose } from \"../entities/user.entity\";\nimport { MongooseUserMapper } from \"../mapper/mongo-user-mapper\";\n\n@Injectable()\nexport class MongooseUserRepository implements UserRepository {\n    constructor(\n        @InjectModel(UserMongoose.name) private readonly userModel: Model<UserMongoose>,\n    ) { }\n    async findCaller(): Promise<User[]> {\n        const findQuery = await this.userModel\n        .find({ type: 'caller'});\n\n        return findQuery.map((item) => MongooseUserMapper.toDomain(item));   \n    }\n    async findAgents(): Promise<User[]> {\n        const findQuery = await this.userModel\n        .find({ type: 'agent'});\n\n        return findQuery.map((item) => MongooseUserMapper.toDomain(item));   \n    }\n\n    async create(user: User): Promise<User> {\n        const data = MongooseUserMapper.toMongoose(user);\n        const entity = new this.userModel({ ...data })\n        await entity.save();\n\n        return MongooseUserMapper.toDomain(entity);\n    }\n\n}\n"],"names":["MongooseUserRepository","findCaller","findQuery","userModel","find","type","map","item","MongooseUserMapper","toDomain","findAgents","create","user","data","toMongoose","entity","save","constructor","Injectable","InjectModel","UserMongoose","name"],"mappings":";;;;+BAUaA;;;eAAAA;;;wBAPc;0BACC;2BACL;4BACc;iCACF;;;;;;;;;;;;;;;AAG5B,IAAA,AAAMA,yBAAN,MAAMA;IAIT,MAAMC,aAA8B;QAChC,MAAMC,YAAY,MAAM,IAAI,CAACC,SAAS,CACrCC,IAAI,CAAC;YAAEC,MAAM;QAAQ;QAEtB,OAAOH,UAAUI,GAAG,CAAC,CAACC,OAASC,mCAAkB,CAACC,QAAQ,CAACF;IAC/D;IACA,MAAMG,aAA8B;QAChC,MAAMR,YAAY,MAAM,IAAI,CAACC,SAAS,CACrCC,IAAI,CAAC;YAAEC,MAAM;QAAO;QAErB,OAAOH,UAAUI,GAAG,CAAC,CAACC,OAASC,mCAAkB,CAACC,QAAQ,CAACF;IAC/D;IAEA,MAAMI,OAAOC,IAAU,EAAiB;QACpC,MAAMC,OAAOL,mCAAkB,CAACM,UAAU,CAACF;QAC3C,MAAMG,SAAS,IAAI,IAAI,CAACZ,SAAS,CAAC;YAAE,GAAGU,IAAI;QAAC;QAC5C,MAAME,OAAOC,IAAI;QAEjB,OAAOR,mCAAkB,CAACC,QAAQ,CAACM;IACvC;IAtBAE,YACI,AAAiDd,SAA8B,CACjF;aADmDA,YAAAA;IACjD;AAsBR;AAzBaH;IADZkB,IAAAA,kBAAU;IAGFC,aAAAA,IAAAA,qBAAW,EAACC,gBAAY,CAACC,IAAI;;;eAA8B,gBAAK,4BAAL,gBAAK;;GAF5DrB"}