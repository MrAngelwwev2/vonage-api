{"version":3,"sources":["../../../../src/infra/persistence/mongoose/mongoose.module.ts"],"sourcesContent":["import { ConversationRepository } from '@app/application/contact-center/ports/conversation.repository';\nimport { UserRepository } from '@app/application/contact-center/ports/user.repository';\nimport { EnvModule, EnvService } from '@app/infra/env';\nimport { Module } from '@nestjs/common';\nimport { MongooseModule as MongooseModuleLib } from '@nestjs/mongoose';\nimport { Conversation, ConversationSchema } from './entities/conversation.entity';\nimport { User, UserSchema } from './entities/user.entity';\n\n// Non exported\nimport { MongooseConversationRepository } from './repositories/mongo-conversation.repository';\nimport { MongooseUserRepository } from './repositories/mongo-user.repository';\n\n@Module({\n    imports: [\n        MongooseModuleLib.forRootAsync({\n            imports: [EnvModule],\n            useFactory: (envService: EnvService) => ({\n                uri: envService.get('MONGODB_URL'),\n            }),\n            inject: [EnvService],\n        }),\n        MongooseModuleLib.forFeature([\n            { name: User.name, schema: UserSchema },\n            { name: Conversation.name, schema: ConversationSchema }\n        ]),\n    ],\n    providers: [\n        {\n            provide: ConversationRepository,\n            useClass: MongooseConversationRepository\n        },\n        {\n            provide: UserRepository,\n            useClass: MongooseUserRepository\n        },\n    ],\n    exports: [ConversationRepository, UserRepository],\n})\nexport class MongooseModule { }"],"names":["MongooseModule","Module","imports","MongooseModuleLib","forRootAsync","EnvModule","useFactory","envService","uri","get","inject","EnvService","forFeature","name","User","schema","UserSchema","Conversation","ConversationSchema","providers","provide","ConversationRepository","useClass","MongooseConversationRepository","UserRepository","MongooseUserRepository","exports"],"mappings":";;;;+BAsCaA;;;eAAAA;;;wCAtC0B;gCACR;qBACO;wBACf;0BAC6B;oCACH;4BAChB;6CAGc;qCACR;;;;;;;AA4BhC,IAAA,AAAMA,iBAAN,MAAMA;AAAiB;AAAjBA;IA1BZC,IAAAA,cAAM,EAAC;QACJC,SAAS;YACLC,wBAAiB,CAACC,YAAY,CAAC;gBAC3BF,SAAS;oBAACG,cAAS;iBAAC;gBACpBC,YAAY,CAACC,aAA4B,CAAA;wBACrCC,KAAKD,WAAWE,GAAG,CAAC;oBACxB,CAAA;gBACAC,QAAQ;oBAACC,eAAU;iBAAC;YACxB;YACAR,wBAAiB,CAACS,UAAU,CAAC;gBACzB;oBAAEC,MAAMC,gBAAI,CAACD,IAAI;oBAAEE,QAAQC,sBAAU;gBAAC;gBACtC;oBAAEH,MAAMI,gCAAY,CAACJ,IAAI;oBAAEE,QAAQG,sCAAkB;gBAAC;aACzD;SACJ;QACDC,WAAW;YACP;gBACIC,SAASC,8CAAsB;gBAC/BC,UAAUC,2DAA8B;YAC5C;YACA;gBACIH,SAASI,8BAAc;gBACvBF,UAAUG,2CAAsB;YACpC;SACH;QACDC,SAAS;YAACL,8CAAsB;YAAEG,8BAAc;SAAC;IACrD;GACaxB"}